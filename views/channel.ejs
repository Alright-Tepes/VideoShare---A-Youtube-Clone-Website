<%- include('partials/header') %>

    <div class="container">
        <div class="profile-header" style="text-align: center; margin-bottom: 2rem;">
            <% if (channelUser.coverUrl) { %>
                <div
                    style="width: 100%; height: 200px; background-image: url('<%= channelUser.coverUrl %>'); background-size: cover; background-position: center; border-radius: 8px; margin-bottom: -50px;">
                </div>
                <% } %>
                    <img src="<%= channelUser.avatarUrl %>" alt="<%= channelUser.username %>" class="avatar"
                        style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 4px solid var(--bg-color); position: relative; background: var(--surface-color); margin-top: 1rem;">
                    <h2 style="margin-top: 0.5rem;">
                        <%= channelUser.username %>
                    </h2>
                    <p style="color: #606060; margin-bottom: 1rem;">
                        <span>
                            <%= (channelUser.followers || []).length %> Takipçi
                        </span> •
                        <span>
                            <%= videos.length %> Video
                        </span>
                    </p>
                    <% if (user && user._id !==channelUser._id.toString()) { %>
                        <form action="/channel/<%= channelUser._id %>/follow" method="POST">
                            <button type="submit" class="btn <%= isFollowing ? '' : 'btn-primary' %>">
                                <%= isFollowing ? 'Takibi Bırak' : 'Takip Et' %>
                            </button>
                        </form>
                        <% } %>
        </div>

        <h2 style="margin-bottom: 1.5rem;">Videolar</h2>

        <div class="video-grid">
            <% if (videos.length> 0) { %>
                <% videos.forEach(video=> { %>
                    <a href="/watch/<%= video._id %>" class="video-card">
                        <div class="thumbnail-container">
                            <img src="<%= video.thumbnailUrl %>" alt="<%= video.title %>">
                        </div>
                        <div class="video-info">
                            <h3 class="video-title">
                                <%= video.title %>
                            </h3>
                            <div class="video-meta">
                                <p>
                                    <%= video.views %> izlenme • <%= new Date(video.createdAt).toLocaleDateString() %>
                                </p>
                            </div>
                        </div>
                    </a>
                    <% }) %>
                        <% } else { %>
                            <p style="grid-column: 1/-1; text-align: center;">Bu kanalın henüz videosu yok.</p>
                            <% } %>
        </div>
    </div>

    <%- include('partials/footer') %>